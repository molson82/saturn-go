console.log("Index.js loaded");const baseURL=window.location.origin,options={method:"GET"};let ws;function connectWS(){if(ws)return!1;ws="http:"===window.location.protocol?new WebSocket("ws://"+window.location.host+"/api/ws/twitch-status"):new WebSocket("wss://"+window.location.host+"/api/ws/twitch-status"),ws.onopen=()=>{console.log("OPEN"),sendPing()},ws.onclose=()=>{console.log("CLOSE"),ws=null,setTimeout(connectWS,1e3)},ws.onmessage=e=>{console.log("RESPONSE: "+e.data);"online"===JSON.parse(e.data).twitchStatus?notifyOnline():notifyOffline()},ws.onerror=e=>{console.log("ERROR: "+e.data)}}function sendPing(){ws.send("ping ws"),setTimeout(sendPing,25e3)}function notifyOnline(){window.location.pathname.includes("/index")&&(document.querySelector("#dbc5f9ab-ca75-4498-8ed9-741cc4531530").classList.replace("text-black","flash-icon"),document.querySelector("#twitch-live-pill").classList.replace("hidden","block"))}function notifyOffline(){window.location.pathname.includes("/index")&&(document.querySelector("#dbc5f9ab-ca75-4498-8ed9-741cc4531530").classList.replace("flash-icon","text-black"),document.querySelector("#twitch-live-pill").classList.replace("block","hidden"))}document.addEventListener("DOMContentLoaded",(()=>{connectWS();"true"===localStorage.getItem("wv-site-darkmode")&&(document.querySelector("html").classList.add("dark"),document.querySelector("#darkModeToggle").checked=!0),document.querySelector("#slideMenuArrow").addEventListener("click",(()=>{const e=document.querySelector("#slideMenu");e.classList.contains("slideHover")?e.classList.remove("slideHover"):e.classList.add("slideHover")})),document.querySelector("#app").addEventListener("click",(()=>{document.querySelector("#slideMenu").classList.remove("slideHover")})),document.querySelector("#darkModeToggle").addEventListener("click",(e=>{e.target.checked?(document.querySelector("html").classList.add("dark"),localStorage.setItem("wv-site-darkmode","true")):(document.querySelector("html").classList.remove("dark"),localStorage.setItem("wv-site-darkmode","false"))}))}));
